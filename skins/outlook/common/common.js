var rcs_common=new function(){this.version="3.4";this.runBeforeReady=function(){if($("#login-form").length){$("body").addClass("login-page");$("#login-form .box-inner").prepend("<div id='company-name'>"+rcs_config_product_name+"</div>");if(!$("#login-form .boxtitle").length){$("#company-name").after("<h1>"+rcs_label_login+"</h1>")}if(typeof rcmail.env.rcs_login_branding!="undefined"&&rcmail.env.rcs_login_branding){$("#login-form h1").after("<img id='login-branding' src='"+rcmail.env.rcs_login_branding+"' alt='' />");$("#company-name").hide();$("h1").hide()}}this.initializeColors()};this.runOnReady=function(){if($("#login-form").length){if(typeof rcs_disable_login_taskbar_outgoing=="undefined"||rcs_disable_login_taskbar_outgoing==true){$(".login-page #taskbar a").each(function(){var b=$(this).attr("href");if(b&&b.substr(0,4)=="http"){$(this).remove()}})}if(typeof rcs_disable_login_logo=="undefined"||rcs_disable_login_logo!=true){$("body").append("<div id='login-logo-icon'><a href='http://roundcubeskins.net' target='_blank' id='login-logo-icon-2'></a><a href='http://roundcubeskins.net' target='_blank' title='More Roundcube skins at roundcubeskins.net' id='login-logo-icon-1'></a></div>")}}$("#mainscreen").prepend("<div id='toolbar-bg'></div>");if($("a.iconbutton").length){$("a.iconbutton").html("")}if($(".messagelist").length){}if($("#calneweventbut").length){$("body").addClass("calendar-page");rcmail.env.skin="larry"}if($("#topnav").length){$("#rcs-logo").appendTo("#topnav");if(typeof rcmail.env.rcs_frame_branding!="undefined"&&rcmail.env.rcs_frame_branding){$("#rcs-logo").attr("src",rcmail.env.rcs_frame_branding)}}if($(".plugin_calendar").length){$("#taskbar a.button-calendar").addClass("button-selected")}if($(".plugin_sticky_notes").length){$("#taskbar a.button-sticky_notes").addClass("button-selected")}if($(".plugin_planner").length){$("#taskbar a.button-planner").addClass("button-selected")}if($("#rss").length){$("#rss").appendTo("#folderlist-footer")}if(document.URL.indexOf("action=plugin.userinfo")){$("#pluginbody h4").addClass("boxtitle");$("#pluginbody table").css("margin","10px")}if($("#skin_preview").length){$(".skinitem").unbind("click");$(".skinitem").click(function(){var b=$(this).children().val();if(b=="larry"||b=="classic"){$("#skin_preview_img").attr("src","./plugins/settings/skins/"+b+"/images/"+b+".png")}else{$("#skin_preview_img").attr("src","./skins/"+b+"/preview.png")}});var a=false;if($(".skinitem input[type=radio]").length){a=$(".skinitem input:checked").val()}else{if($("#desktop-skin-select").length){a=$("#desktop-skin-select .skinitem input").val()}else{if($("select#rcmfd_skin").length){a=$("select#rcmfd_skin").val()}}}if(a){$("#skin_preview_img").attr("src","./skins/"+a+"/preview.png")}}if($("#planner_controls a").not("#today").length){$("#planner_controls a").not("#today").html("")}if($(".scheduled_sending").length){$(".scheduled_sending").text($(".scheduled_sending").attr("title"))}setTimeout(function(){if($(".button-skin-options .tooltip").length){$(".button-skin-options .tooltip").html(rcs_label_skin)}},0)};this.changeColor=function(a,c){c=typeof c!=="undefined"?c:true;var b=$("body");b.removeClass(function(e,d){return(d.match(/color-\S+/g)||[]).join(" ")});b.addClass("color-"+a);if(c){rcmail.save_pref({name:"rcs_skin_color_"+rcmail.env.rcs_skin,value:a})}};this.showOptions=function(a){if($("#skin-options").length){UI.show_popup("skin-options")}};this.pluginLoaded=function(){return typeof rcmail.env.rcs_skin!=="undefined"};this.mobile=function(){return rcs_common.pluginLoaded()&&rcmail.env.rcs_mobile&&rcmail.env.rcs_skin!="litecube-f"};this.initializeColors=function(){if(typeof skinColorValues=="undefined"){return}if(typeof skinColorDefault=="undefined"){skinColorDefault=skinColorValues[0][0]}if(typeof skinColorStyles=="undefined"){skinColorStyles=""}var h="";var c=skinColorValues[0].length;for(var g=0;g<skinColorValues.length;g++){var k=skinColorStyles;for(var f=0;f<c;f++){k=k.replace(new RegExp("%"+(f+1),"g"),skinColorValues[g][f])}h+=k}$("body").append("<style>"+h+"</style>");if(typeof rcs_disable_colors!=="undefined"&&rcs_disable_colors){rcs_common.changeColor(skinColorDefault,false);return}if(rcs_common.pluginLoaded()){if(rcs_common.mobile()){$("#topnav a.button-logout").before("<a class='button-disable_mobile_skin' href='javascript:void(0)' onclick='rcs_common.disableMobileSkin()'>"+rcs_label_disable_mobile_skin+"</a>");$("#topnav a.button-logout").after("<a class='button-skin-options' href='javascript:void(0)' onclick='rcs_mobile.popup(event, \"skin-options\")'><span style='background-color: #b0263b'></span><span style='background-color: #00860e'></span><span style='background-color: #0075c8'></span><span style='background-color: #8d2297'></span></a>")}else{$("#topnav a.button-logout").before("<a class='button-skin-options' href='javascript:void(0)' id='skin-optionslink' onclick='rcs_common.showOptions(this)'><span class='button-inner'></span></a>")}}var d="";for(var g=0;g<skinColorValues.length;g++){d+="<a class='color-box' onclick='rcs_common.changeColor(&quot;"+skinColorValues[g][0]+"&quot;)' style='background:#"+skinColorValues[g][0]+" !important'></a>";if((g+1)%6==0){d+="<br />"}}if(rcs_common.hasCookie("rcs_disable_mobile_skin")){d+="<div id='enable-mobile-skin'><input type='button' class='button mainaction' onclick='rcs_common.enableMobileSkin()' value='"+rcs_label_enable_mobile_skin+"' /></div>";$("#header .topleft").prepend("<a href='javascript:void(0)' onclick='rcs_common.enableMobileSkin()'>"+rcs_label_enable_mobile_skin+"</a>")}var a="<div id='skin-options' class='popupmenu'>"+(rcs_common.mobile()?"<h5>"+rcs_label_options+"</h5>":"")+"<div id='skin-color-select'>"+d+"</div><div class='loader'></div></div>";$("body").append(a);var b=typeof rcmail.env.rcs_color!=="undefined"?rcmail.env.rcs_color:false;var e=false;for(var g=0;g<skinColorValues.length;g++){if(b==skinColorValues[g][0]){e=b;break}}rcs_common.changeColor(e?e:skinColorDefault,false)};this.disableMobileSkin=function(){rcs_common.setCookie("rcs_disable_mobile_skin",1,Infinity);location.reload()};this.enableMobileSkin=function(){rcs_common.removeCookie("rcs_disable_mobile_skin");location.reload()};this.getCookie=function(a){if(!a){return null}return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null};this.setCookie=function(d,g,c,b,a,e){if(!d||/^(?:expires|max\-age|path|domain|secure)$/i.test(d)){return false}var f="";if(c){switch(c.constructor){case Number:f=c===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+c;break;case String:f="; expires="+c;break;case Date:f="; expires="+c.toUTCString();break}}document.cookie=encodeURIComponent(d)+"="+encodeURIComponent(g)+f+(a?"; domain="+a:"")+(b?"; path="+b:"")+(e?"; secure":"");return true};this.removeCookie=function(c,b,a){if(!this.hasCookie(c)){return false}document.cookie=encodeURIComponent(c)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(a?"; domain="+a:"")+(b?"; path="+b:"");return true};this.hasCookie=function(a){if(!a){return false}return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)};this.getCookieKeys=function(){var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var c=a.length,b=0;b<c;b++){a[b]=decodeURIComponent(a[b])}return a}};